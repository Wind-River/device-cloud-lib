#
# Copyright (C) @COPYRIGHT_RANGE@ Wind River Systems, Inc. All Rights Reserved.
#
# The right to copy, distribute or otherwise make use of this software may
# be licensed only pursuant to the terms of an applicable Wind River license
# agreement.  No license to Wind River intellectual property rights is granted
# herein.  All rights not licensed by Wind River are reserved by Wind River.

!include ..\${IOT_MAKE_FILE}
!undef CFLAGS_
!undef LDFLAGS_

SRCS = ${SRCS}
OBJS = $(SRCS:.c=${CMAKE_C_OUTPUT_EXTENSION})
CFLAGS_ = $(CFLAGS) /I"$(IOT_INCLUDE_DIR)" /D_CRT_SECURE_NO_WARNINGS ${CFLAGS}
LDFLAGS_ = $(LDFLAGS) /LIBPATH:"$(IOT_LIB_DIR)" ${LDFLAGS}
LIBS = ${IOT_LIBRARY}.lib
RM = del

all: ${TARGET}

${TARGET}: $(OBJS)
	"$(CC)" $** /Fe"${TARGET}" $(CFLAGS_) /link $(LDFLAGS_) $(LIBS)

.c${CMAKE_C_OUTPUT_EXTENSION}:
	"$(CC)" /c /Fo"$@" $(CFLAGS_) $<

clean:
	@$(RM) ${TARGET} $(OBJS)

